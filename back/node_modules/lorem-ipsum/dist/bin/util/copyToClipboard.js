"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _child_process = require("child_process");

var _ = require(".");

/**
 * Copy text to the clipboard using a platform's native command.
 * @param  text  The text to copy.
 * @returns      A promise that resolves with the text to copy.
 */
var copyToClipboard = function copyToClipboard(text) {
  return new Promise(function (resolve, reject) {
    try {
      var platform = (0, _.getPlatform)();

      if ((0, _.isSupportedPlatform)(platform) === false) {
        throw new Error("Copy is not supported for ".concat(platform));
      }

      var command = "echo \"".concat(text, "\" | ").concat((0, _.getCopyCommand)(platform));
      (0, _child_process.exec)(command, function (error, stdout, stderr) {
        /* istanbul ignore if */
        if (error) {
          return reject(error);
        }

        if (stderr) {
          return reject(new Error(stderr));
        }

        return resolve(text);
      });
    } catch (error) {
      return reject(error);
    }
  });
};

var _default = copyToClipboard;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9iaW4vdXRpbC9jb3B5VG9DbGlwYm9hcmQudHMiXSwibmFtZXMiOlsiY29weVRvQ2xpcGJvYXJkIiwidGV4dCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicGxhdGZvcm0iLCJFcnJvciIsImNvbW1hbmQiLCJlcnJvciIsInN0ZG91dCIsInN0ZGVyciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFNQSxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLENBQUNDLElBQUQsRUFBbUM7QUFDekQsU0FBTyxJQUFJQyxPQUFKLENBQ0wsVUFBQ0MsT0FBRCxFQUFrQ0MsTUFBbEMsRUFBcUU7QUFDbkUsUUFBSTtBQUNGLFVBQU1DLFFBQVEsR0FBRyxvQkFBakI7O0FBQ0EsVUFBSSwyQkFBb0JBLFFBQXBCLE1BQWtDLEtBQXRDLEVBQTZDO0FBQzNDLGNBQU0sSUFBSUMsS0FBSixxQ0FBdUNELFFBQXZDLEVBQU47QUFDRDs7QUFDRCxVQUFNRSxPQUFPLG9CQUFZTixJQUFaLGtCQUF1QixzQkFBZUksUUFBZixDQUF2QixDQUFiO0FBQ0EsK0JBQUtFLE9BQUwsRUFBYyxVQUFDQyxLQUFELEVBQVFDLE1BQVIsRUFBZ0JDLE1BQWhCLEVBQTJCO0FBQ3ZDO0FBQ0EsWUFBSUYsS0FBSixFQUFXO0FBQ1QsaUJBQU9KLE1BQU0sQ0FBQ0ksS0FBRCxDQUFiO0FBQ0Q7O0FBRUQsWUFBSUUsTUFBSixFQUFZO0FBQ1YsaUJBQU9OLE1BQU0sQ0FBQyxJQUFJRSxLQUFKLENBQVVJLE1BQVYsQ0FBRCxDQUFiO0FBQ0Q7O0FBRUQsZUFBT1AsT0FBTyxDQUFDRixJQUFELENBQWQ7QUFDRCxPQVhEO0FBWUQsS0FsQkQsQ0FrQkUsT0FBT08sS0FBUCxFQUFjO0FBQ2QsYUFBT0osTUFBTSxDQUFDSSxLQUFELENBQWI7QUFDRDtBQUNGLEdBdkJJLENBQVA7QUF5QkQsQ0ExQkQ7O2VBNEJlUixlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhlYyB9IGZyb20gXCJjaGlsZF9wcm9jZXNzXCI7XG5pbXBvcnQgeyBnZXRDb3B5Q29tbWFuZCwgZ2V0UGxhdGZvcm0sIGlzU3VwcG9ydGVkUGxhdGZvcm0gfSBmcm9tIFwiLlwiO1xuXG4vKipcbiAqIENvcHkgdGV4dCB0byB0aGUgY2xpcGJvYXJkIHVzaW5nIGEgcGxhdGZvcm0ncyBuYXRpdmUgY29tbWFuZC5cbiAqIEBwYXJhbSAgdGV4dCAgVGhlIHRleHQgdG8gY29weS5cbiAqIEByZXR1cm5zICAgICAgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdGV4dCB0byBjb3B5LlxuICovXG5jb25zdCBjb3B5VG9DbGlwYm9hcmQgPSAodGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKFxuICAgIChyZXNvbHZlOiAodGV4dDogc3RyaW5nKSA9PiB2b2lkLCByZWplY3Q6IChlcnJvcjogRXJyb3IpID0+IHZvaWQpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBsYXRmb3JtID0gZ2V0UGxhdGZvcm0oKTtcbiAgICAgICAgaWYgKGlzU3VwcG9ydGVkUGxhdGZvcm0ocGxhdGZvcm0pID09PSBmYWxzZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29weSBpcyBub3Qgc3VwcG9ydGVkIGZvciAke3BsYXRmb3JtfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBgZWNobyBcIiR7dGV4dH1cIiB8ICR7Z2V0Q29weUNvbW1hbmQocGxhdGZvcm0pfWA7XG4gICAgICAgIGV4ZWMoY29tbWFuZCwgKGVycm9yLCBzdGRvdXQsIHN0ZGVycikgPT4ge1xuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHN0ZGVycikge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3Ioc3RkZXJyKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUodGV4dCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgfSxcbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvcHlUb0NsaXBib2FyZDtcbiJdfQ==